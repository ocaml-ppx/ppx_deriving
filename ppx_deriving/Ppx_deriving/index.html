<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ppx_deriving (ppx_deriving.Ppx_deriving)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">ppx_deriving</a> &#x00BB; Ppx_deriving</nav><header class="odoc-preamble"><h1>Module <code><span>Ppx_deriving</span></code></h1><p>Public API of <code>ppx_deriving</code> executable.</p></header><nav class="odoc-toc"><ul><li><a href="#registration">Registration</a></li><li><a href="#coercions">Coercions</a></li><li><a href="#option-parsing">Option parsing</a></li><li><a href="#hygiene">Hygiene</a></li><li><a href="#ast-manipulation">AST manipulation</a></li><li><a href="#miscellanea">Miscellanea</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-tyvar"><a href="#type-tyvar" class="anchor"></a><code><span><span class="keyword">type</span> tyvar</span><span> = <span>string <span class="xref-unresolved">Ppxlib</span>.Location.loc</span></span></code></div></div><h3 id="registration"><a href="#registration" class="anchor"></a>Registration</h3><div class="odoc-spec"><div class="spec type anchored" id="type-deriver"><a href="#type-deriver" class="anchor"></a><code><span><span class="keyword">type</span> deriver</span><span> = </span><span>{</span></code><ol><li id="type-deriver.name" class="def record field anchored"><a href="#type-deriver.name" class="anchor"></a><code><span>name : string;</span></code></li><li id="type-deriver.core_type" class="def record field anchored"><a href="#type-deriver.core_type" class="anchor"></a><code><span>core_type : <span><span>(<span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression)</span> option</span>;</span></code></li><li id="type-deriver.type_decl_str" class="def record field anchored"><a href="#type-deriver.type_decl_str" class="anchor"></a><code><span>type_decl_str : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Ppxlib</span>.type_declaration list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.structure;</span></code></li><li id="type-deriver.type_ext_str" class="def record field anchored"><a href="#type-deriver.type_ext_str" class="anchor"></a><code><span>type_ext_str : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.structure;</span></code></li><li id="type-deriver.module_type_decl_str" class="def record field anchored"><a href="#type-deriver.module_type_decl_str" class="anchor"></a><code><span>module_type_decl_str : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.module_type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.structure;</span></code></li><li id="type-deriver.type_decl_sig" class="def record field anchored"><a href="#type-deriver.type_decl_sig" class="anchor"></a><code><span>type_decl_sig : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Ppxlib</span>.type_declaration list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.signature;</span></code></li><li id="type-deriver.type_ext_sig" class="def record field anchored"><a href="#type-deriver.type_ext_sig" class="anchor"></a><code><span>type_ext_sig : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.signature;</span></code></li><li id="type-deriver.module_type_decl_sig" class="def record field anchored"><a href="#type-deriver.module_type_decl_sig" class="anchor"></a><code><span>module_type_decl_sig : <span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.module_type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.signature;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A type of deriving plugins.</p><p>A structure or signature deriving function accepts a list of <code>~options</code>, a <code>~path</code> of modules for the type declaration currently being processed (with <code>[]</code> for toplevel phrases), and a type declaration item (<code>type t = .. and t' = ..</code>), and returns a list of items to be appended after the type declaration item in structure and signature. It is invoked by <code>[\@\@deriving]</code> annotations.</p><p>A type deriving function accepts a type and returns a corresponding derived expression. It is invoked by <code>[%derive.foo:]</code> and <code>[%foo:]</code> annotations. If this function is missing, the corresponding <code>[%foo:]</code> annotation is ignored.</p><p>The structure and signature deriving functions are invoked in the order in which they appear in the source code.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : <span><a href="#type-deriver">deriver</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>register deriver</code> registers <code>deriver</code> according to its <code>name</code> field.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_register_hook"><a href="#val-add_register_hook" class="anchor"></a><code><span><span class="keyword">val</span> add_register_hook : <span><span>(<span><a href="#type-deriver">deriver</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_register_hook hook</code> adds <code>hook</code> to be executed whenever a new deriver is registered.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-derivers"><a href="#val-derivers" class="anchor"></a><code><span><span class="keyword">val</span> derivers : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-deriver">deriver</a> list</span></span></code></div><div class="spec-doc"><p><code>derivers ()</code> returns all currently registered derivers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?core_type</span>:<span>(<span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?type_ext_str</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.structure)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?type_ext_sig</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.signature)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?type_decl_str</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span class="xref-unresolved">Ppxlib</span>.type_declaration list</span> <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.structure)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?type_decl_sig</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span class="xref-unresolved">Ppxlib</span>.type_declaration list</span> <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.signature)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?module_type_decl_str</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="xref-unresolved">Ppxlib</span>.module_type_declaration <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.structure)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?module_type_decl_sig</span>:
    <span>(<span><span class="label">options</span>:<span><span>(string * <span class="xref-unresolved">Ppxlib</span>.expression)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="xref-unresolved">Ppxlib</span>.module_type_declaration <span class="arrow">&#45;&gt;</span></span>
      <span class="xref-unresolved">Ppxlib</span>.signature)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-deriver">deriver</a></span></code></div><div class="spec-doc"><p>Creating <a href="#type-deriver"><code>deriver</code></a> structure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookup"><a href="#val-lookup" class="anchor"></a><code><span><span class="keyword">val</span> lookup : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-deriver">deriver</a> option</span></span></code></div><div class="spec-doc"><p><code>lookup name</code> looks up a deriver called <code>name</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raise_errorf"><a href="#val-raise_errorf" class="anchor"></a><code><span><span class="keyword">val</span> raise_errorf : 
  <span><span class="optlabel">?sub</span>:<span><span class="xref-unresolved">Ocaml_common</span>.Location.error list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Ppxlib</span>.Location.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, unit, string, <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Error handling</p></div></div><h3 id="coercions"><a href="#coercions" class="anchor"></a>Coercions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_core_type"><a href="#val-string_of_core_type" class="anchor"></a><code><span><span class="keyword">val</span> string_of_core_type : <span><span class="xref-unresolved">Ppxlib</span>.Parsetree.core_type <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_of_core_type typ</code> unparses <code>typ</code>, omitting any attributes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_constant_opt"><a href="#val-string_of_constant_opt" class="anchor"></a><code><span><span class="keyword">val</span> string_of_constant_opt : <span><span class="xref-unresolved">Ppxlib</span>.Parsetree.constant <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>string_of_constant_opt c</code> returns <code>Some s</code> if the constant <code>c</code> is a string <code>s</code>, <code>None</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_expression_opt"><a href="#val-string_of_expression_opt" class="anchor"></a><code><span><span class="keyword">val</span> string_of_expression_opt : <span><span class="xref-unresolved">Ppxlib</span>.Parsetree.expression <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>string_of_expression_opt e</code> returns <code>Some s</code> if the expression <code>e</code> is a string constant <code>s</code>, <code>None</code> otherwise.</p></div></div><h3 id="option-parsing"><a href="#option-parsing" class="anchor"></a>Option parsing</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Arg"><a href="#module-Arg" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Arg/index.html">Arg</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="Arg/index.html"><code>Arg</code></a> contains convenience functions that extract constants from AST fragments, to be used when parsing options or <code>[\@attributes]</code> attached to types, fields or constructors.</p></div></div><h3 id="hygiene"><a href="#hygiene" class="anchor"></a>Hygiene</h3><div class="odoc-spec"><div class="spec type anchored" id="type-quoter"><a href="#type-quoter" class="anchor"></a><code><span><span class="keyword">type</span> quoter</span></code></div><div class="spec-doc"><p>A <code>quoter</code> remembers a set of expressions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_quoter"><a href="#val-create_quoter" class="anchor"></a><code><span><span class="keyword">val</span> create_quoter : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-quoter">quoter</a></span></code></div><div class="spec-doc"><p><code>quoter ()</code> creates an empty quoter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-quote"><a href="#val-quote" class="anchor"></a><code><span><span class="keyword">val</span> quote : <span><span class="label">quoter</span>:<a href="#type-quoter">quoter</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>quote quoter expr</code> records a pure expression <code>expr</code> within <code>quoter</code> and returns an expression which has the same value as <code>expr</code> in the context that <code>sanitize</code> provides.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sanitize"><a href="#val-sanitize" class="anchor"></a><code><span><span class="keyword">val</span> sanitize : 
  <span><span class="optlabel">?module_</span>:<span class="xref-unresolved">Ppxlib</span>.Longident.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?quoter</span>:<a href="#type-quoter">quoter</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>sanitize module_ quoter expr</code> wraps <code>expr</code> in a way that ensures that the contents of <code>module_</code> and <code>Stdlib</code>, as well as the identifiers in expressions returned by <code>quote</code> are in scope, and returns the wrapped expression. <code>module_</code> defaults to <a href="../Ppx_deriving_runtime/index.html"><code>Ppx_deriving_runtime</code></a> if it's not provided</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_quoter"><a href="#val-with_quoter" class="anchor"></a><code><span><span class="keyword">val</span> with_quoter : 
  <span><span>(<span><a href="#type-quoter">quoter</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>with_quoter fn</code> â‰¡ <code>fun fn a -&gt; let quoter = create_quoter () in sanitize ~quoter (fn quoter a)</code></p></div></div><h3 id="ast-manipulation"><a href="#ast-manipulation" class="anchor"></a>AST manipulation</h3><div class="odoc-spec"><div class="spec value anchored" id="val-expand_path"><a href="#val-expand_path" class="anchor"></a><code><span><span class="keyword">val</span> expand_path : <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>expand_path name</code> returns <code>name</code> with the <code>path</code> module path prepended, e.g. <code>expand_path [&quot;Foo&quot;;&quot;M&quot;] &quot;t&quot;</code> = <code>&quot;Foo.M.t&quot;</code> and <code>expand_path [] &quot;t&quot;</code> = <code>&quot;t&quot;</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-path_of_type_decl"><a href="#val-path_of_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> path_of_type_decl : 
  <span><span class="label">path</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span>string list</span></span></code></div><div class="spec-doc"><p><code>path_of_type_decl ~path type_</code> returns <code>path</code> if <code>type_</code> does not have a manifest or the manifest is not a constructor, and the module path of manifest otherwise.</p><p><code>path_of_type_decl</code> is useful when determining the canonical path location of fields and constructors; e.g. for <code>type bar = M.foo = A | B</code>, it will return <code>[&quot;M&quot;]</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mangle_type_decl"><a href="#val-mangle_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> mangle_type_decl : 
  <span><span class="optlabel">?fixpoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`Prefix of string</span> <span><span>| `Suffix</span> of string</span> <span><span>| `PrefixSuffix</span> of string * string</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>mangle_type_decl ~fixpoint affix type_</code> derives a function name from <code>type_</code> name by doing nothing if <code>type_</code> is named <code>fixpoint</code> (<code>&quot;t&quot;</code> by default), or appending and/or prepending <code>affix</code> via an underscore.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mangle_lid"><a href="#val-mangle_lid" class="anchor"></a><code><span><span class="keyword">val</span> mangle_lid : 
  <span><span class="optlabel">?fixpoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`Prefix of string</span> <span><span>| `Suffix</span> of string</span> <span><span>| `PrefixSuffix</span> of string * string</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.Longident.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.Longident.t</span></code></div><div class="spec-doc"><p><code>mangle_lid ~fixpoint affix lid</code> does the same as <a href="#val-mangle_type_decl"><code>mangle_type_decl</code></a>, but for the last component of <code>lid</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-attr"><a href="#val-attr" class="anchor"></a><code><span><span class="keyword">val</span> attr : 
  <span><span class="label">deriver</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.attributes <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.attribute option</span></span></code></div><div class="spec-doc"><p><code>attr ~deriver name attrs</code> searches for an attribute <code>[\@deriving.deriver.attr]</code> in <code>attrs</code> if any attribute with name starting with <code>\@deriving.deriver</code> exists, or <code>[\@deriver.attr]</code> if any attribute with name starting with <code>\@deriver</code> exists, or <code>[\@attr]</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-attr_warning"><a href="#val-attr_warning" class="anchor"></a><code><span><span class="keyword">val</span> attr_warning : <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.attribute</span></code></div><div class="spec-doc"><p><code>attr_warning expr</code> builds the attribute <code>\@ocaml.warning expr</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-free_vars_in_core_type"><a href="#val-free_vars_in_core_type" class="anchor"></a><code><span><span class="keyword">val</span> free_vars_in_core_type : <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tyvar">tyvar</a> list</span></span></code></div><div class="spec-doc"><p><code>free_vars_in_core_type typ</code> returns unique free variables in <code>typ</code> in lexical order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_pervasives"><a href="#val-remove_pervasives" class="anchor"></a><code><span><span class="keyword">val</span> remove_pervasives : <span><span class="label">deriver</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p><code>remove_pervasives ~deriver typ</code> removes the leading &quot;Pervasives.&quot; and &quot;Stdlib.&quot; module name in longidents. Type expressions marked with <code>[\@nobuiltin]</code> are ignored.</p><p>The name of the deriving plugin should be passed as <code>deriver</code>; it is used in error messages.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fresh_var"><a href="#val-fresh_var" class="anchor"></a><code><span><span class="keyword">val</span> fresh_var : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>fresh_var bound</code> returns a fresh variable name not present in <code>bound</code>. The name is selected in alphabetical succession.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_left_type_decl"><a href="#val-fold_left_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> fold_left_type_decl : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tyvar">tyvar</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_left_type_decl fn accum type_</code> performs a left fold over all type variable (i.e. not wildcard) parameters in <code>type_</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_right_type_decl"><a href="#val-fold_right_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> fold_right_type_decl : 
  <span><span>(<span><a href="#type-tyvar">tyvar</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_right_type_decl fn accum type_</code> performs a right fold over all type variable (i.e. not wildcard) parameters in <code>type_</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_left_type_ext"><a href="#val-fold_left_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> fold_left_type_ext : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tyvar">tyvar</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_left_type_ext fn accum type_</code> performs a left fold over all type variable (i.e. not wildcard) parameters in <code>type_</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_right_type_ext"><a href="#val-fold_right_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> fold_right_type_ext : 
  <span><span>(<span><a href="#type-tyvar">tyvar</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_right_type_ext fn accum type_</code> performs a right fold over all type variable (i.e. not wildcard) parameters in <code>type_</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_fun_of_type_decl"><a href="#val-poly_fun_of_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> poly_fun_of_type_decl : 
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>poly_fun_of_type_decl type_ expr</code> wraps <code>expr</code> into <code>fun poly_N -&gt; ...</code> for every type parameter <code>'N</code> present in <code>type_</code>. For example, if <code>type_</code> refers to <code>type ('a, 'b) map</code>, <code>expr</code> will be wrapped into <code>fun poly_a poly_b -&gt; [%e expr]</code>.</p><p><code>_</code> parameters are ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_fun_of_type_ext"><a href="#val-poly_fun_of_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> poly_fun_of_type_ext : 
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p>Same as <a href="#val-poly_fun_of_type_decl"><code>poly_fun_of_type_decl</code></a> but for type extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_apply_of_type_decl"><a href="#val-poly_apply_of_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> poly_apply_of_type_decl : 
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>poly_apply_of_type_decl type_ expr</code> wraps <code>expr</code> into <code>expr poly_N</code> for every type parameter <code>'N</code> present in <code>type_</code>. For example, if <code>type_</code> refers to <code>type ('a, 'b) map</code>, <code>expr</code> will be wrapped into <code>[%e expr] poly_a poly_b</code>.</p><p><code>_</code> parameters are ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_apply_of_type_ext"><a href="#val-poly_apply_of_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> poly_apply_of_type_ext : 
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p>Same as <a href="#val-poly_apply_of_type_decl"><code>poly_apply_of_type_decl</code></a> but for type extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_arrow_of_type_decl"><a href="#val-poly_arrow_of_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> poly_arrow_of_type_decl : 
  <span><span>(<span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p><code>poly_arrow_of_type_decl fn type_ typ</code> wraps <code>typ</code> in an arrow with <code>fn [%type: 'N]</code> as argument for every type parameter <code>'N</code> present in <code>type_</code>. For example, if <code>type_</code> refers to <code>type ('a, 'b) map</code> and <code>fn</code> is <code>fun var -&gt; [%type: [%t var] -&gt; string]</code>, <code>typ</code> will be wrapped into <code>('a -&gt; string) -&gt; ('b -&gt; string) -&gt; [%t typ]</code>.</p><p><code>_</code> parameters are ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-poly_arrow_of_type_ext"><a href="#val-poly_arrow_of_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> poly_arrow_of_type_ext : 
  <span><span>(<span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p>Same as <a href="#val-poly_arrow_of_type_decl"><code>poly_arrow_of_type_decl</code></a> but for type extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-core_type_of_type_decl"><a href="#val-core_type_of_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> core_type_of_type_decl : <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p><code>core_type_of_type_decl type_</code> constructs type <code>('a, 'b, ...) t</code> for type declaration <code>type ('a, 'b, ...) t = ...</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-core_type_of_type_ext"><a href="#val-core_type_of_type_ext" class="anchor"></a><code><span><span class="keyword">val</span> core_type_of_type_ext : <span><span class="xref-unresolved">Ppxlib</span>.type_extension <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p>Same as <a href="#val-core_type_of_type_decl"><code>core_type_of_type_decl</code></a> but for type extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-instantiate"><a href="#val-instantiate" class="anchor"></a><code><span><span class="keyword">val</span> instantiate : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.core_type * <span>string list</span> * <span>string list</span></span></code></div><div class="spec-doc"><p><code>instantiate bound type_</code> returns <code>typ, vars, bound'</code> where <code>typ</code> is a type instantiated from type declaration <code>type_</code>, <code>vars</code> â‰¡ <code>free_vars_in_core_type typ</code> and <code>bound'</code> â‰¡ <code>bound @ vars</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_exprs"><a href="#val-fold_exprs" class="anchor"></a><code><span><span class="keyword">val</span> fold_exprs : 
  <span><span class="optlabel">?unit</span>:<span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Ppxlib</span>.expression list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>fold_exprs ~unit fn exprs</code> folds <code>exprs</code> using head of <code>exprs</code> as initial accumulator value, or <code>unit</code> if <code>exprs = []</code>.</p><p>See also <a href="#val-seq_reduce"><code>seq_reduce</code></a> and <a href="#val-binop_reduce"><code>binop_reduce</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seq_reduce"><a href="#val-seq_reduce" class="anchor"></a><code><span><span class="keyword">val</span> seq_reduce : 
  <span><span class="optlabel">?sep</span>:<span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p>When <code>sep</code> is present: <code>seq_reduce</code> â‰¡ <code>fun x a b -&gt; [%expr [%e a]; [%e x]; [%e b]]</code>. When <code>sep</code> is missing: <code>seq_reduce</code> â‰¡ <code>fun a b -&gt; [%expr [%e a]; [%e b]]</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-binop_reduce"><a href="#val-binop_reduce" class="anchor"></a><code><span><span class="keyword">val</span> binop_reduce : 
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib</span>.expression</span></code></div><div class="spec-doc"><p><code>binop_reduce</code> â‰¡ <code>fun x a b -&gt; [%expr [%e x] [%e a] [%e b]]</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-strong_type_of_type"><a href="#val-strong_type_of_type" class="anchor"></a><code><span><span class="keyword">val</span> strong_type_of_type : <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type</span></code></div><div class="spec-doc"><p><code>strong_type_of_type ty</code> transform a type ty to <code>freevars . ty</code>, giving a strong polymorphic type</p></div></div><p>The mapper for the currently loaded deriving plugins. It is useful for recursively processing expression-valued attributes.</p><div class="odoc-spec"><div class="spec class anchored" id="class-mapper"><a href="#class-mapper" class="anchor"></a><code><span><span class="keyword">class</span> </span><span>mapper</span><span> : <span class="xref-unresolved">Ppxlib</span>.Ast_traverse.map</span></code></div></div><h3 id="miscellanea"><a href="#miscellanea" class="anchor"></a>Miscellanea</h3><div class="odoc-spec"><div class="spec value anchored" id="val-hash_variant"><a href="#val-hash_variant" class="anchor"></a><code><span><span class="keyword">val</span> hash_variant : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>hash_variant x</code> â‰¡ <code>Btype.hash_variant x</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Ast_convenience"><a href="#module-Ast_convenience" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ast_convenience/index.html">Ast_convenience</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
